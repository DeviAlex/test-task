import{d as V,u as T,a as b,r as p,w as B,o as D,c as d,n as L,b as M,e as a,t,F as N,f as S,g as v,h as c,i as j,j as k,k as f,l as F,T as I,W as O,m as $,_ as x}from"./index-Dl7MZA04.js";const z={class:"page"},A={class:"title"},E={class:"weather-status"},P=["src"],q={key:0,class:"weather-info"},G=V({__name:"WeekView",setup(H){const o=T(),m=b(),y=$(),r=p(o.getCity),i=p(o.getWeatherWeek),u=p(),w=new Date,W=async e=>{m.started(),await y.getWeatherWeekData(e).then(n=>{i.value=n,o.setWeatherWeek(i.value)}).finally(()=>{setTimeout(()=>{m.finished()},100)})},_=e=>{const n=new Date;return n.setDate(w.getDate()+e),n.toLocaleString("ru",{day:"numeric",month:"long",weekday:"long"})},C=e=>{if(u.value===e){u.value=void 0;return}u.value=e},g=e=>{(Object.keys(i.value).length===0||e!==o.city)&&W(o.city)};return B(o,()=>{g(r.value),setTimeout(()=>{r.value=o.getCity},100)}),D(()=>{var e,n;r.value&&g((n=(e=i.value)==null?void 0:e.city)==null?void 0:n.name)}),(e,n)=>(c(),d("div",z,[Object.keys(i.value).length!==0?(c(),d("div",{key:0,class:L(["wrapper",{loading:M(m).isLoading}])},[a("h1",A,t(r.value),1),(c(!0),d(N,null,S(i.value.list,(s,l)=>(c(),j(O,{key:l,onClick:h=>C(l)},{default:k(()=>{var h;return[f(t(_(l))+" ",1),a("div",E,[a("img",{id:"wicon",src:`https://openweathermap.org/img/w/${(h=s.weather[0])==null?void 0:h.icon}.png`,alt:"Weather icon"},null,8,P),f(" "+t(s.weather[0].description),1)]),a("h2",null,t(Math.round(s.main.temp_min))+"°C/"+t(Math.round(s.main.temp_max))+"°C",1),F(I,{name:"slide-fade"},{default:k(()=>[u.value===l?(c(),d("div",q,[a("h2",null,t(_(l)),1),a("span",null,"Ощущается как "+t(s.main.feels_like),1),a("span",null,"Атмосферное давление "+t(s.main.pressure)+" hPa",1),a("span",null,"Влажность "+t(s.main.humidity),1),a("span",null,"Видимость "+t(Math.round(s.visibility/1e3))+" Км",1),a("span",null,"Скорость ветра "+t(s.wind.speed)+" м/с",1)])):v("",!0)]),_:2},1024)]}),_:2},1032,["onClick"]))),128))],2)):v("",!0)]))}}),K=x(G,[["__scopeId","data-v-16e07228"]]);export{K as default};
